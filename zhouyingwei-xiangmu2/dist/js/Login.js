"use strict";$(function(){$("#deng").click(function(){$("#deng").attr("class","gaoliang"),$("#zhu").attr("class",""),$(".main-r-deng").css("display","block"),$(".main-r-zhu").css("display","none")}),$("#zhu").click(function(){$("#deng").attr("class",""),$("#zhu").attr("class","gaoliang"),$(".main-r-deng").css("display","none"),$(".main-r-zhu").css("display","block")});var t="";function i(){for(var i=0;i<4;i++)t+="zxcvbnmasdfghjklqwertyuiop1234567890ZXCVBNMASDFGHJKLQWERTYUIOP".charAt(parseInt(62*Math.random()));$("#yzm").html(t)}$("#huan").click(function(){t="",i()}),i();var r=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,a=/^[a-zA-Z0-9]{6,20}$/,l=/^[a-zA-Z0-9_\-]{1,}@[a-zA-Z0-9_\-]{1,}\.[a-zA-Z0-9_\-.]{1,}$/,n=!1,g=!1,o=!1,s=!1,e=!1,m=!1;function c(){var i=$("#z-tex1").val();""!=i?r.test(i)?$.ajax({type:"POST",url:"../api/api.php",data:"jiekou=register&yonghu="+i,success:function(i){n="0"==i?($("#tishi-1").html('<img src="../img/login-img/right.png" alt="">可注册,登录名不能修改，请记住！'),$("#tishi-1").attr("style","color: #169709"),!0):($("#tishi-1").html('<img src="../img/login-img/error.png" alt="">已经存在'),$("#tishi-1").attr("style","color: #CD0606"),!1)}}):($("#tishi-1").html(' <img src="../img/login-img/error.png" alt="">手机号格式不正确'),$("#tishi-1").attr("style","color: #CD0606"),n=!1):($("#tishi-1").html(' <img src="../img/login-img/error.png" alt="">手机号不能为空'),$("#tishi-1").attr("style","color: #CD0606"),n=!1)}function h(){var i=$("#z-tex2").val();g=""!=i?($("#tishi-2").html('<img src="../img/login-img/right.png" alt="">昵称可以在用户中心修改！'),$("#tishi-2").attr("style","color: #169709"),!0):($("#tishi-2").html(' <img src="../img/login-img/error.png" alt="">名称不能为空'),$("#tishi-2").attr("style","color: #CD0606"),!1)}function u(){var i=$("#z-tex3").val();o=""!=i?a.test(i)?($("#tishi-3").html('<img src="../img/login-img/right.png" alt="">密码可用！'),!0):($("#tishi-3").html(' <img src="../img/login-img/error.png" alt="">6-20位数字或字母之内'),!1):($("#tishi-3").html(' <img src="../img/login-img/error.png" alt="">密码不能为空'),!1)}function p(){var i=$("#z-tex4").val(),t=$("#z-tex3").val();s=""!=i?a.test(i)?i==t?($("#tishi-4").html('<img src="../img/login-img/right.png" alt="">密码可用！'),!0):($("#tishi-4").html(' <img src="../img/login-img/error.png" alt="">两次密码输入不一致'),!1):($("#tishi-4").html(' <img src="../img/login-img/error.png" alt="">6-20位数字或字母之内'),!1):($("#tishi-4").html(' <img src="../img/login-img/error.png" alt="">密码不能为空'),!1)}function z(){var i=$("#z-tex5").val();e=""!=i?l.test(i)?($("#tishi-5").html('<img src="../img/login-img/right.png" alt="">邮箱可用可用！'),!0):($("#tishi-5").html(' <img src="../img/login-img/error.png" alt="">邮箱格式不正确'),!1):($("#tishi-5").html(' <img src="../img/login-img/error.png" alt="">邮箱不能为空'),!1)}function f(){var i=$("#z-tex6").val(),t=$("#yzm").text();m=""!=i&&i.toLowerCase()==t.toLowerCase()}$("#z-tex1").blur(function(){c()}),$("#z-tex2").blur(function(){h()}),$("#z-tex3").blur(function(){u()}),$("#z-tex4").blur(function(){p()}),$("#z-tex5").blur(function(){z()}),$("#z-tex6").blur(function(){f()}),$("#z-but").click(function(){if(console.log(m),c(),h(),u(),p(),p(),z(),f(),n&&g&&o&&s&&e&&m){var i=$("#z-tex1").val(),t=$("#z-tex2").val(),r=$("#z-tex3").val(),a=$("#z-tex5").val();$.ajax({type:"POST",url:"../api/api.php",data:"jiekou=register2&shouji="+i+"&name="+t+"&mima="+r+"&youxiang="+a,success:function(i){"true"==i?alert("注册成功"):alert("注册失败")}})}}),$("#d-but").click(function(){var i=$("#d-tex1").val(),t=$("#d-psw").val();$.ajax({type:"POST",url:"../api/api.php",data:"jiekou=login&shouji="+i+"&mima="+t,success:function(i){var t=JSON.parse(i);if(0!=t.length){var r=document.cookie.split("=")[1],a=t[0].id;a!=r?(alert("登录成功"),function(i,t,r){var a=i+"="+t;r.expires&&(a+=";expires="+r.expires.toUTCString());r.path&&(a+=";path="+r.path);r.domain&&(a+=";domain="+r.domain);document.cookie=a}("use",a,{path:"/dist"}),location.href="../index.html?"):alert("此用户正在登录")}else alert("密码错误，登录失败")}})})});