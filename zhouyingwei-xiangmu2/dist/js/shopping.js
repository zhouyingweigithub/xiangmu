"use strict";$(function(){var a=document.cookie.split("="),i=a[1];2<=a.length&&$.ajax({type:"POST",url:"../api/api.php",data:"jiekou=gouwuche&user="+i,success:function(a){for(var i=JSON.parse(a),n=0;n<i.length;n++)$.ajax({type:"POST",url:"../api/api.php",data:"jiekou=gouwuche&id="+i[n].id,success:function(a){var n=JSON.parse(a).map(function(a){var n=(1*a.jiage1/(1*a.jiage2)).toFixed(2),e=1*a.jiage2-1*a.jiage1;return'<li data-id="'+a.id+'">\n                                <span><input class="che" type="checkbox"></span>\n                                <span>\n                                    <img src="../img/list-img/'+a.img+'" alt="">\n                                </span>\n                                <span>\n                                     <p>'+a.name+"</p>\n                                </span>\n                                <span>\n                                     <p>"+a.jiage2+'.00</p>\n                                     <p class="danjia">'+a.jiage1+".00</p>\n                                </span>\n                                <span>\n                                    <p>"+e+".00</p>\n                                    <p>"+n+'折</p>\n                                </span>\n                                <span>\n                                    <div>\n                                         <input type="text" value="'+i[0].shuliang+'" class="tex">\n                                         <div class="shangxia">\n                                             <div class="jia"></div>\n                                             <div class="jian"></div>\n                                         </div>\n                                    </div>\n                                </span>\n                                <span class="zongjia">'+a.jiage1+'.00</span>\n                                <span>\n                                    <div class="sanchu">X</div>\n                                </span>\n                            </li>'});$("#g-list").get(0).innerHTML+=n}})}});var p=0;function s(){$("#zongji").text("¥"+p+".00"),$("#zongji2").text("¥"+p+".00")}s(),$("#g-list").on("click","input",function(){var a=$(this).parent().parent().index(),n=1*$(".zongjia").eq(a).text();$(this).prop("checked")?p+=n:p-=n,s()}),$("#main").on("click","#quan",function(){p=0;var a=$(".che").length;if($(this).prop("checked")){for(var n=0;n<=a;n++)p+=1*$(".zongjia").eq(n).text();$(".che").prop("checked",!0)}else $(".che").prop("checked",!1);s()}),$("#main").on("click","#quansan",function(){p=0;var a=$("#g-list li").length;console.log(a);for(var n=a;0<=n;n--){var e=$("#g-list li").get(0).dataset.id;$("#g-list li").eq(n).remove(),$.ajax({type:"POST",url:"../api/api.php",data:"jiekou=shanchu&id="+e+"&user="+i,success:function(a){}})}alert("删除成功"),s()});var c=1;$("#g-list").on("click",".jia",function(){p=0;var a=$(this).parent().parent().parent().parent().index(),n=$("#g-list input").length;(c=$(".tex").eq(a).val())<1e3&&c++,$(".tex").eq(a).val(c);var e=1*$(".danjia").eq(a).text(),i=c*e;$(".zongjia").eq(a).text(i+".00");for(var t=0;t<=n;t++)$(".che").eq(t).prop("checked")&&(p+=1*$(".zongjia").eq(t).text());s()}),$("#g-list").on("click",".jian",function(){p=0;var a=$(this).parent().parent().parent().parent().index(),n=$("#g-list input").length;1<(c=$(".tex").eq(a).val())&&c--,$(".tex").eq(a).val(c);var e=1*$(".danjia").eq(a).text(),i=c*e;$(".zongjia").eq(a).text(i+".00");for(var t=0;t<=n;t++)$(".che").eq(t).prop("checked")&&(p+=1*$(".zongjia").eq(t).text());s()}),$("#g-list").on("click",".sanchu",function(){var a=$(this).parent().parent().get(0).dataset.id;$(this).parent().parent().remove(),$.ajax({type:"POST",url:"../api/api.php",data:"jiekou=shanchu&id="+a+"&user="+i,success:function(a){a?alert("删除成功"):alert("删除失败")}});var n=$(this).parent().parent().length;console.log(n);for(var e=0;e<=n;e++)$(".che").eq(e).prop("checked")&&(p+=1*$(".zongjia").eq(e).text());s()})});